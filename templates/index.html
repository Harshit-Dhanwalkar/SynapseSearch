<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SynapseSearch</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/theme-switcher.css') }}">
    <script src="{{ url_for('static', filename='js/theme-switcher.js') }}" defer></script>
    <style>
      /* CSS for the typewriter effect */
      .typewriter-cursor {
        animation: blink 0.7s infinite;
        font-weight: bold;
      }
      @keyframes blink {
        0% { opacity: 0; }
        50% { opacity: 1; }
        100% { opacity: 0; }
      }
    </style>
  </head>
  <body class="min-h-screen flex flex-col justify-between theme-bg-main theme-text-primary">
    <header class="p-6 text-right theme-bg-main">
      {% include 'partials/theme-switcher.html' %}
    </header>

    <main class="flex-grow flex flex-col items-center justify-center p-6 theme-bg-main">
      <h1 id="typewriter-heading" class="text-5xl font-bold mb-8 theme-text-primary">
        <span id="typewriter-text"></span>
        <span class="typewriter-cursor">|</span>
      </h1>

      {% if indexer_doc_count %}
      <p class="theme-text-secondary text-sm mb-4">
        Currently indexing {{ indexer_doc_count }} pages.
      </p>
      {% endif %}

      <form
        id="search-form"
        action="/search"
        method="get"
        class="w-full max-w-xl relative"
      >
        <div class="relative">
          <input
            type="text"
            name="query"
            id="search-input"
            autocomplete="off"
            class="w-full px-6 py-4 border rounded-full shadow-lg focus:outline-none text-xl theme-input theme-border"
            placeholder="Search the web..."
          />
          <button
            type="submit"
            class="absolute right-6 top-1/2 transform -translate-y-1/2 theme-text-secondary hover:text-gray-700"
          >
            <i class="fas fa-search text-xl"></i>
          </button>
        </div>
        <div
          id="autocomplete-results"
          class="absolute z-10 w-full mt-2 bg-white border border-gray-300 rounded-lg shadow-lg hidden"
        ></div>
        <div class="flex items-center justify-center mt-4 space-x-4">
          <div class="inline-flex items-center cursor-pointer">
            <span class="mr-2 theme-text-secondary">Keyword Search</span>
            <label class="relative inline-flex items-center cursor-pointer">
              <input
                type="checkbox"
                value="semantic"
                name="mode"
                id="semantic-toggle"
                class="sr-only peer"
              />
              <div class="relative w-12 h-6">
                <div
                  class="w-full h-full bg-gray-300 rounded-full peer-checked:bg-blue-600 transition-colors duration-200"
                ></div>
                <div
                  class="absolute left-1 top-1 bg-white border border-gray-300 rounded-full h-4 w-4 transition-transform duration-200 peer-checked:translate-x-6"
                ></div>
              </div>
            </label>
            <span class="ml-2 theme-text-secondary">Semantic Search</span>
          </div>
        </div>
      </form>
    </main>

    <footer class="p-6 text-center text-sm theme-text-secondary">
      <p>&copy; 2025 SynapseSearch. All rights reserved.</p>
    </footer>
    <script>
      // Typewriter effect script
      document.addEventListener("DOMContentLoaded", function () {
        const textElement = document.getElementById("typewriter-text");
        const headingText = "SynapseSearch";
        let i = 0;
        let speed = 100;

        function typeWriter() {
          if (i < headingText.length) {
            textElement.innerHTML += headingText.charAt(i);
            i++;
            setTimeout(typeWriter, speed);
          }
        }
        typeWriter();
      });
    </script>
  </body>
</html>
